import "./lefish.aqua"
import "./fdb.aqua"

const PEER ?= "12D3KooWPBWYscDWmRwLChgpTZLS7u8KndXiMHubVVfsGqRW6Kn9"
const RELAY ?= "12D3KooWSD5PToNiLQwKDXsu8JSysCwUt8BVUJEqCHcDe7P5h45e"

const GAME_SERVICE_PEER ?= "12D3KooWR2Fcs8KLsrNhULeUgn9d9totR14FEnaVqJZC7ESrRfZA"
const GAME_SERVICE_ID ?= "lefish"

const FDB_SERVICE_ID ?= "fdb"

const MINT_URI ?= "https://api.thegraph.com/subgraphs/name/saifiikmal/dosasubgraph"

func mint_listen():
  on PEER via RELAY:
    for mint <- LefishGame.get_latest_mint(MINT_URI) par:
        metadata <- LefishGame.mint()
        -- send metadata to fdb
        fdb FDB_SERVICE_ID
        
        

